Script started on Fri Sep 27 10:27:21 2019
u306065@imac-310[31]: cat 01-B-02.c
// ç”»åƒæƒ…å ±å‡¦ç†(ã‚³ãƒ”ãƒ¼)
// 2019/09/20
// æ«›ç”°ä¸€æ¨¹
#include<stdio.h>
#include<stdlib.h>

int main(){
    FILE *fp;
    int c, i, num = 0, count = 0;
    unsigned char array[100];

    // ãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ¼ãƒ—ãƒ³
    fp = fopen("test.bmp","rb");

    if(fp == NULL){
        printf("ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã§ãã¾ã›ã‚“ã§ã—ãŸ\n");
        exit(1);
    }

    printf("èª­ã¿è¾¼ã¿ç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã—ã¾ã—ãŸ.\n");

    // ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰1ãƒã‚¤ãƒˆãšã¤èª­ã¿è¾¼ã‚€
    c = getc(fp);
    while(c != EOF){
        array[num] = c;
        c = fgetc(fp);
        count++;
        num++;
    }

    // ãƒ•ã‚¡ã‚¤ãƒ«ã‚¯ãƒ­ãƒ¼ã‚º
    fclose(fp);

    printf("%då€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿,é…åˆ—ã«æ ¼ç´ã—ã¾ã—ãŸ.\n",count);
    printf("èª­ã¿è¾¼ã¿ç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã—ã¾ã—ãŸ.\n");
    putchar('\n');

    // é…åˆ—ã®ä¸­èº«ã‚’è¡¨ç¤º
    printf("é…åˆ—ã®ä¸­èº«ã‚’è¡¨ç¤ºã—ã¾ã™\n");
    for(i = 0; i < num; i++){
        printf("array[%d] = %d\n", i, array[i]);
    }
    putchar('\n');

    // æ›¸ãå‡ºã—ç”¨fopen
    fp = fopen("testcp.bmp", "wb");

    if(fp == NULL){
        printf("ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã§ãã¾ã›ã‚“.\n");
        exit(1);
    }

    printf("æ›¸ãå‡ºã—ç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã—ã¾ã—ãŸ.\n");

    // ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãå‡ºã—
    for(i = 0; i < num; i++){
        fputc(array[i], fp);
    }

    // ãƒ•ã‚¡ã‚¤ãƒ«ã‚¯ãƒ­ãƒ¼ã‚º
    fclose(fp);
    printf("é…åˆ—ã«æ ¼ç´ã•ã‚Œã¦ã„ãŸ%då€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãå‡ºã—ã¾ã—ãŸ.\n", num);
    printf("æ›¸ãå‡ºã—ç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã—ã¾ã—ãŸ.\n");

    return 0;
}u306065@imac-310[32]: gcc -Wall 01-B-02.c -o 01-B-02.c[Kout
u306065@imac-310[33]: 01-B-02.out
èª­ã¿è¾¼ã¿ç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã—ã¾ã—ãŸ.
5å€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿,é…åˆ—ã«æ ¼ç´ã—ã¾ã—ãŸ.
èª­ã¿è¾¼ã¿ç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã—ã¾ã—ãŸ.

é…åˆ—ã®ä¸­èº«ã‚’è¡¨ç¤ºã—ã¾ã™
array[0] = 50
array[1] = 100
array[2] = 150
array[3] = 200
array[4] = 250

æ›¸ãå‡ºã—ç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã—ã¾ã—ãŸ.
é…åˆ—ã«æ ¼ç´ã•ã‚Œã¦ã„ãŸ5å€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãå‡ºã—ã¾ã—ãŸ.
æ›¸ãå‡ºã—ç”¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã—ã¾ã—ãŸ.
u306065@imac-310[34]: ./a.out
ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã—ã¾ã—ãŸã€‚
 50
100
150
200
250
å…¨éƒ¨ã§5ãƒã‚¤ãƒˆèª­ã¿è¾¼ã¿ã¾ã—ãŸ
ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã—ã¾ã—ãŸ
u306065@imac-310[35]: exit
exit

Script done on Fri Sep 27 10:28:25 2019
